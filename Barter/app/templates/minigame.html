<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏-–∏–≥—Ä–∞: –õ–∞–±–∏—Ä–∏–Ω—Ç‚ú°Ô∏è</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 20px;
            box-sizing: border-box;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .game-container {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 100%;
        }
        
        .instructions {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        button {
            background: #ff8c00;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background: #ff6a00;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .maze {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-gap: 2px;
            margin: 0 auto;
            background-color: #2c3e50;
            padding: 5px;
            border-radius: 5px;
        }
        
        .cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 3px;
            font-weight: bold;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .wall {
            background-color: #34495e;
        }
        
        .path {
            background-color: #ecf0f1;
            color: #2c3e50;
        }
        
        .player {
            background-color: #e74c3c;
            color: white;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.7);
            z-index: 2;
        }
        
        .exit {
            background-color: #2ecc71;
            color: white;
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.7);
            z-index: 2;
        }
        
        .gas {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            animation: gasPulse 2s infinite;
            z-index: 1;
        }
        
        .gas-source {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.8);
            z-index: 1;
        }
        
        @keyframes gasPulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .message {
            text-align: center;
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            min-height: 30px;
        }
        
        .gas-warning {
            color: #f1c40f;
            text-shadow: 0 0 10px rgba(241, 196, 15, 0.5);
            animation: warningPulse 1s infinite;
        }
        
        @keyframes warningPulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        @media (max-width: 500px) {
            .cell {
                width: 30px;
                height: 30px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <h1>–ú–∏–Ω–∏-–∏–≥—Ä–∞: –õ–∞–±–∏—Ä–∏–Ω—Ç —Å –≥–∞–∑–æ–º</h1>
    
    <div class="game-container">
        <div class="instructions">
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è. –î–æ–±–µ—Ä–∏—Ç–µ—Å—å –æ—Ç <span style="color:#e74c3c">–∫—Ä–∞—Å–Ω–æ–π</span> —Ç–æ—á–∫–∏ –¥–æ <span style="color:#2ecc71">–∑–µ–ª—ë–Ω–æ–π</span> —Ç–æ—á–∫–∏.</p>
            <p class="gas-warning">‚ö†Ô∏è –ì–∞–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞! –ù–µ –ø–æ–ø–∞–¥–∞–π—Ç–µ –≤ –≥–∞–∑–æ–≤—ã–µ –æ–±–ª–∞—Å—Ç–∏!</p>
        </div>
        
        <div class="controls">
            <button id="restartBtn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <button id="hintBtn">–ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
        </div>
        
        <div class="stats">
            <div>–•–æ–¥—ã: <span id="moveCount">0</span></div>
            <div>–í—Ä–µ–º—è: <span id="timer">0</span> —Å–µ–∫</div>
            <div>–ì–∞–∑: <span id="gasLevel">0%</span></div>
        </div>
        
        <div class="maze" id="maze"></div>
        
        <div class="message" id="message"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mazeElement = document.getElementById('maze');
            const moveCountElement = document.getElementById('moveCount');
            const timerElement = document.getElementById('timer');
            const gasLevelElement = document.getElementById('gasLevel');
            const messageElement = document.getElementById('message');
            const restartBtn = document.getElementById('restartBtn');
            const hintBtn = document.getElementById('hintBtn');
            
            let maze = [];
            let playerPosition = { row: 0, col: 0 };
            let exitPosition = { row: 9, col: 9 };
            let gasSourcePosition = { row: 9, col: 0 };
            let moveCount = 0;
            let timer = 0;
            let timerInterval;
            let gasInterval;
            let gameActive = false;
            let gasCells = [];
            let gasSpreadLevel = 0;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ª–∞–±–∏—Ä–∏–Ω—Ç–∞ (0 - –ø—É—Ç—å, 1 - —Å—Ç–µ–Ω–∞)
            const mazeStructure = [
                [0, 1, 0, 0, 0, 1, 0, 1, 0, 0],
                [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
                [0, 0, 0, 1, 0, 0, 0, 0, 0, 1],
                [1, 1, 0, 1, 1, 1, 1, 1, 0, 1],
                [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
                [0, 1, 1, 1, 1, 1, 0, 1, 1, 0],
                [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
                [1, 1, 1, 1, 0, 1, 1, 1, 1, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                [1, 1, 1, 1, 1, 1, 1, 0, 0, 0]
            ];
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            function initGame() {
                maze = JSON.parse(JSON.stringify(mazeStructure));
                playerPosition = { row: 0, col: 0 };
                exitPosition = { row: 9, col: 9 };
                gasSourcePosition = { row: 9, col: 0 };
                moveCount = 0;
                timer = 0;
                gasSpreadLevel = 0;
                gameActive = true;
                gasCells = [gasSourcePosition];
                
                moveCountElement.textContent = moveCount;
                timerElement.textContent = timer;
                gasLevelElement.textContent = '0%';
                messageElement.textContent = '';
                
                clearInterval(timerInterval);
                clearInterval(gasInterval);
                
                timerInterval = setInterval(() => {
                    if (gameActive) {
                        timer++;
                        timerElement.textContent = timer;
                    }
                }, 1000);
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≥–∞–∑–∞ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
                gasInterval = setInterval(spreadGas, 3000);
                
                renderMaze();
            }
            
            // –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≥–∞–∑–∞
            function spreadGas() {
                if (!gameActive) return;
                
                gasSpreadLevel++;
                const gasPercentage = Math.min(100, Math.floor((gasCells.length / 40) * 100));
                gasLevelElement.textContent = `${gasPercentage}%`;
                
                // –ù–∞—Ö–æ–¥–∏–º –Ω–æ–≤—ã–µ –∫–ª–µ—Ç–∫–∏ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≥–∞–∑–æ–º
                let newGasCells = [];
                let directions = [
                    { row: -1, col: 0 }, // –≤–≤–µ—Ä—Ö
                    { row: 1, col: 0 },  // –≤–Ω–∏–∑
                    { row: 0, col: -1 }, // –≤–ª–µ–≤–æ
                    { row: 0, col: 1 }   // –≤–ø—Ä–∞–≤–æ
                ];
                
                // –î–ª—è –∫–∞–∂–¥–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≥–∞–∑–æ–≤–æ–π –∫–ª–µ—Ç–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å–µ–¥–µ–π
                for (let gasCell of gasCells) {
                    for (let dir of directions) {
                        const newRow = gasCell.row + dir.row;
                        const newCol = gasCell.col + dir.col;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç—å –≥–∞–∑ –≤ —ç—Ç—É –∫–ª–µ—Ç–∫—É
                        if (newRow >= 0 && newRow < 10 && newCol >= 0 && newCol < 10 && 
                            maze[newRow][newCol] === 0 && 
                            !gasCells.some(cell => cell.row === newRow && cell.col === newCol) &&
                            !newGasCells.some(cell => cell.row === newRow && cell.col === newCol)) {
                            
                            newGasCells.push({ row: newRow, col: newCol });
                        }
                    }
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –≥–∞–∑–æ–≤—ã–µ –∫–ª–µ—Ç–∫–∏
                gasCells = [...gasCells, ...newGasCells];
                
                renderMaze();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø–æ–ø–∞–ª –ª–∏ –∏–≥—Ä–æ–∫ –≤ –≥–∞–∑
                const playerInGas = gasCells.some(cell => 
                    cell.row === playerPosition.row && cell.col === playerPosition.col);
                
                if (playerInGas) {
                    gameActive = false;
                    clearInterval(timerInterval);
                    clearInterval(gasInterval);
                    messageElement.textContent = "–í—ã –ø–æ–ø–∞–ª–∏ –≤ –≥–∞–∑! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.";
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –ª–∏ –≤–µ—Å—å –ª–∞–±–∏—Ä–∏–Ω—Ç
                if (gasPercentage >= 90) {
                    gameActive = false;
                    clearInterval(timerInterval);
                    clearInterval(gasInterval);
                    messageElement.textContent = "–õ–∞–±–∏—Ä–∏–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–æ–ª–Ω–µ–Ω –≥–∞–∑–æ–º! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.";
                }
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞
            function renderMaze() {
                mazeElement.innerHTML = '';
                
                for (let row = 0; row < 10; row++) {
                    for (let col = 0; col < 10; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        
                        if (maze[row][col] === 1) {
                            cell.classList.add('wall');
                        } else {
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–ª–µ—Ç–∫–∞ –≥–∞–∑–æ–º
                            const isGas = gasCells.some(gasCell => gasCell.row === row && gasCell.col === col);
                            const isGasSource = row === gasSourcePosition.row && col === gasSourcePosition.col;
                            
                            if (isGasSource) {
                                cell.classList.add('gas-source');
                                cell.textContent = 'üí®';
                            } else if (isGas) {
                                cell.classList.add('gas');
                                cell.textContent = '‚òÅÔ∏è';
                            } else {
                                cell.classList.add('path');
                            }
                            
                            if (row === playerPosition.row && col === playerPosition.col) {
                                cell.classList.add('player');
                                cell.textContent = '‚ú°Ô∏è';
                            } else if (row === exitPosition.row && col === exitPosition.col) {
                                cell.classList.add('exit');
                                cell.textContent = 'üèÅ';
                            }
                        }
                        
                        mazeElement.appendChild(cell);
                    }
                }
            }
            
            // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
            function movePlayer(direction) {
                if (!gameActive) return;
                
                let newRow = playerPosition.row;
                let newCol = playerPosition.col;
                
                switch(direction) {
                    case 'up': newRow--; break;
                    case 'down': newRow++; break;
                    case 'left': newCol--; break;
                    case 'right': newCol++; break;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã, —Å—Ç–µ–Ω—ã –∏ –≥–∞–∑
                const isGas = gasCells.some(cell => cell.row === newRow && cell.col === newCol);
                
                if (newRow >= 0 && newRow < 10 && newCol >= 0 && newCol < 10 && 
                    maze[newRow][newCol] === 0 && !isGas) {
                    playerPosition.row = newRow;
                    playerPosition.col = newCol;
                    moveCount++;
                    moveCountElement.textContent = moveCount;
                    
                    renderMaze();
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–±–µ–¥—É
                    if (playerPosition.row === exitPosition.row && playerPosition.col === exitPosition.col) {
                        gameActive = false;
                        clearInterval(timerInterval);
                        clearInterval(gasInterval);
                        messageElement.textContent = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç –∑–∞ ${moveCount} —Ö–æ–¥–æ–≤ –∏ ${timer} —Å–µ–∫—É–Ω–¥!`;
                    }
                }
            }
            
            // –ü–æ–¥—Å–∫–∞–∑–∫–∞
            function showHint() {
                if (!gameActive) return;
                
                messageElement.textContent = "–ì–∞–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∏–∑ –ª–µ–≤–æ–≥–æ –Ω–∏–∂–Ω–µ–≥–æ —É–≥–ª–∞! –î–≤–∏–≥–∞–π—Ç–µ—Å—å –±—ã—Å—Ç—Ä–æ!";
                setTimeout(() => {
                    if (gameActive) messageElement.textContent = '';
                }, 3000);
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            document.addEventListener('keydown', function(event) {
                switch(event.key) {
                    case 'ArrowUp': movePlayer('up'); break;
                    case 'ArrowDown': movePlayer('down'); break;
                    case 'ArrowLeft': movePlayer('left'); break;
                    case 'ArrowRight': movePlayer('right'); break;
                }
            });
            
            restartBtn.addEventListener('click', initGame);
            hintBtn.addEventListener('click', showHint);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            initGame();
        });
    </script>
</body>
</html>